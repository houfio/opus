<button class="title" (click)="sprintDetails = sprint" [disabled]="!sprint">
  {{ sprint ? sprint.name : 'Backlog' }}
  <span *ngIf="sprint" class="row">
    <span *ngIf="sprint.startDate && sprint.endDate" class="subtle">
      {{ sprint.startDate.toDate() | date }}
      -
      {{ sprint.endDate.toDate() | date }}
    </span>
    {{ points }} points
    <fa-icon *ngIf="sprint" [icon]="icon" class="icon"></fa-icon>
  </span>
  <app-button *ngIf="!sprint" (press)="createSprint()">
    Create sprint
  </app-button>
</button>
<div
  class="list"
  [class.empty]="!tasksInSprint.length"
  cdkDropList
  cdkDropListSortingDisabled
  (cdkDropListDropped)="onDrop($event)"
>
  <app-backlog-task
    *ngFor="let task of tasksInSprint"
    cdkDrag
    [cdkDragData]="task"
    [task]="task"
    [states]="states"
    (click)="details = task"
  ></app-backlog-task>
</div>
<div class="footer">
  <form *ngIf="data.open; else inactive" (ngSubmit)="createTask()">
    <input
      #input
      name="title"
      class="input"
      placeholder="What needs to be done?"
      [(ngModel)]="data.title"
      (blur)="setOpen(false)"
    />
    <input type="submit" style="display: none"/>
  </form>
  <ng-template #inactive>
    <button class="input" (click)="setOpen(true)">Add task...</button>
  </ng-template>
</div>
<app-task-overlay
  *ngIf="details"
  @ngIfAnimation
  [task]="details"
  (dismiss)="details = undefined"
></app-task-overlay>
<app-sprint-overlay
  *ngIf="sprintDetails"
  @ngIfAnimation
  [sprint]="sprintDetails"
  (dismiss)="sprintDetails = undefined"
></app-sprint-overlay>
